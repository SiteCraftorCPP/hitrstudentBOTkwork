"""
Скрипт для инициализации первого задания "Узнать, как зарабатывать на просмотре трансляций"
Запустите этот скрипт один раз после первого запуска бота, если хотите добавить это задание автоматически.
Или добавьте задание через админ-панель бота.
"""

from database import Database
from config import STREAM_INFO_REWARD

db = Database()

# Проверяем, есть ли уже такое задание
tasks = db.get_tasks(task_type='info')
existing = False
for task in tasks:
    if 'трансляций' in task['title'].lower() or 'стримов' in task['title'].lower():
        existing = True
        break

if not existing:
    task_id = db.add_task(
        task_type='info',
        title='Узнать, как зарабатывать на просмотре трансляций/стримов',
        description=(
            'Заработок на просмотре трансляций и стримов - это простой способ получать дополнительный доход.\n\n'
            'Как это работает:\n'
            '1. Регистрируйтесь на платформах для просмотра стримов\n'
            '2. Смотрите трансляции и получайте награды\n'
            '3. Выводите заработанные средства\n\n'
            'Это отличная возможность совмещать развлечение с заработком!'
        ),
        reward=STREAM_INFO_REWARD
    )
    print(f"OK: Задание добавлено! ID: {task_id}")
else:
    print("INFO: Задание уже существует в базе данных")

